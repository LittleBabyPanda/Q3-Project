library(midasr)
library('forecast')
library('tseries')
library('ggplot2')
library('ggfortify')
library('fUnitRoots')
library(stringr)
conso <- read.csv('Ressources/Consommation des ménages trimestrielle.csv', sep=';')
as.double(str_replace_all(conso$TOTAL,",","."))
conso <- ts(as.double(str_replace_all(conso$TOTAL,",",".")), frequency=4, start=c(1990,1))
ytyvar <- diff(conso, differences=4)/conso
plot(ytyvar)
X_cvs <- ts(read.csv('Ressources/inputdatacvs.csv'), frequency=12, start=c(2011,4))
X_brut <- ts(read.csv('Ressources/inputdatabrut.csv'), frequency=12, start=c(2011,4))
length(ytyvar)
help(fmls)
help(midas_u)
list(X_cvs,ytyvar)
help(midas_u)
fmls(list(X_cvs,ytyvar),4,12)
ytyvar
ytyvar <- ytyvar[81:length(ytyvar)]
ytyvar
fmls(list(X_cvs,ytyvar),4,12)
X_brut
fmls(list(X_cvs,ytyvar),2,4)
length(X_brut)
length(X_brut$Matériels.audio.et.vidéo..indice.en.volume..Brut.)
length(X_brut$Matériels.audio.et.vidéo..indice.en.volume..Brut.)
X_brut$Activités.informatiques.et.services.d.information..évolution.de.l.activité.par.rapport.au.mois.précédent..Brut.
X_brut
fmls(list(X_cvs,ytyvar),2,4)
fmls(list(X_cvs,ytyvar))
list(X_cvs,ytyvar)
fmls(X_brut,5,12)
X_brut
data.frame(X_brut)
fmls(data.frame(X_brut),5,12)
typeof(X_brut)
typeof(conso)
pull(X_brut)
library(dplyr)
pull(X_brut)
pull(X_brut$)
X_brut.columns
X_brut$columns
X_brut$col
X_brut
select(X_brut,1)
select(data.table(X_brut),1)
select(data.frame(X_brut),1)
select(data.frame(X_brut),2)
select(data.frame(X_brut),3)
ncol(X_brut)
hf = list()
for (i in 2:ncol(X_brut)){
hf[i] <- select(data.frame(X_brut),i)
}
hf
hf[1]
hf[2]
hf[11]
X_brut
data.frame(X_brut)
data.frame(X_brut,2)
data.frame(X_brut,2)
select(data.frame(X_brut),2)
hf = list()
for (i in 2:ncol(X_brut)){
hf[[i]] <- select(data.frame(X_brut),i)
}
hf[1]
hf[[1]]
hf[[2]]
hf[2]
hf = list()
for (i in 2:ncol(X_brut)){
hf[[i-1]] <- select(data.frame(X_brut),i)
}
fmls(hf,5,12)
fmls(hf[1],5,12)
hf = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut),i)
}
fmls(hf[1],5,12)
fmls(hf,5,12)
fmls(hf,2,12)
mls(hf,0:2,12)
hf = c(X_brut)
hf
hf = list(X_brut)
hf
mls(hf,0:2,12)
fmls(hf,2,12)
fmls(hf,2,4)
fmls(hf,2)
fmls(hf,2,12)
fmls(hf,2,3)
fmls(hf,2,3)
hf
length(X_brut
)
hf[1]
length(hf[1])
length(hf[1][1])
hf[1]
hf[2]
hf = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut),i)
}
hf[2]
length(hf[2])
length(hf[[2]])
fmls(hf[[2]],2,3)
fmls(hf,2,3)
hf = c()
for (i in 2:ncol(X_brut)){
hf[[i-1]] <- select(data.frame(X_brut),i)
}
hf[2]
length(hf[2])
length(hf[[2]])
fmls(hf,2,3)
hf[i-1] <- select(data.frame(X_brut),i)
hf = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut),i)
}
length(hf)
mixed = c()
for (i in 1:length(hf)){
mixed[[i]] <- fmls(hf[[i]],4,3)
}
mixed
sum(mixed)
mixed$sum
fmls(hf,4,3)
lm(ytyvar~.,data=mixed)
midas_u(ytyvar~.,data=mixed)
?midas_u
data.frame(X_brut)
hdt = data.frame(X_brut)
fmls(X_brut,2,3)
?fmls
?mls
?dmls
ldt = data.frame(ytyvar)
data.frame(ytyvar)
?midas_u
mls(ldt,1:3,1)
ldt = data.frame(ytyvar)
mls(ldt,1:3,1)
mls(ldt,1:3)
mls(ldt,1:3,1)
mls(ytyvar,1:3,1)
midas_u(ytyvar~mls(ytyvar,1:3,1)+mixed[[1]]+mixed[[2]]+mixed[[3]],data = list(ytyvar,hdt))
list(ytyvar,hdt)
midas_u(ytyvar~mls(ytyvar,1:3,1)+mixed[[1]]+mixed[[2]]+mixed[[3]])
midas_u(ytyvar~mls(ytyvar,1:3,1)+mixed[[1]])
midas_u(ytyvar~mls(ytyvar,1:3,1))
midas_u(ytyvar~mls(ytyvar,1:3,1) + fmls(hf[[1]],4,3))
list(ytyvar,hdt)
~mls(ytyvar,1:3,1)
mls(ytyvar,1:3,1)
length(mls(ytyvar,1:3,1))
ytyvar <- diff(conso, differences=4)/conso
ytyvar <- ytyvar[82:length(ytyvar)]
midas_u(ytyvar~length(mls(ytyvar,1:3,1)) + fmls(hf[[1]],4,3))
ytyvar
length(ytyvar)
fmls(X_brut,5,3)
hf = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut),i)
}
mixed = c()
for (i in 1:length(hf)){
mixed[[i]] <- fmls(hf[[i]],4,3)
}
fmls(hf,4,3)
mixed[1]
midas_u(ytyvar~.)
midas_u(ytyvar~., data=(mls(ytyvar,1:3,1)))
midas_u(ytyvar~., data=list(ldt,hdt)
q
midas_u(ytyvar~., data=list(ldt,hdt))
midas_u(ytyvar~.,list(ldt,hdt))
midas_u(ytyvar~.,data = list(ldt,hdt))
midas_u(ytyvar~mls(ytyvar,1:3,1) + .,data = mixed)
midas_u(ytyvar~mls(ytyvar,1:3,1) + ., mixed)
midas_u(ytyvar~mls(ytyvar,1:3,1) + ., mixed)
lm(ytyvar~mls(ytyvar,1:3,1) + ., mixed)
midas_r(ytyvar~mls(ytyvar,1:3,1) + ., mixed)
hdt
list(ldt, x=hdt$x)
length(ytyvar)
length(ytyvar[4:])
length(ytyvar[4:length(ytyvar)])
y = ytyvar[4:length(ytyvar)]
midas_r(y~mls(ytyvar,1:3,1) + ., mixed)
midas_u(y~mls(ytyvar,1:3,1) + ., mixed)
midas_u(y~mls(ytyvar,1:3,1) + ., data=mixed)
mixed[1]
midas_u(y~mls(ytyvar,1:3,1))
mls(ytyvar,1:3,1)
length(mls(ytyvar,1:3,1))
midas_u(ytyvar~mls(ytyvar,1:3,1))
mixed[[1]]
mls(ytyvar,1:3,1)
midas_u(ytyvar~mls(ytyvar,1:3,1)+mixed[[1]])
midas_u(ytyvar~mls(ytyvar,1:3,1)+mixed[[1]]+mixed[[2]]+mixed[[3]]+mixed[[4]])
midas_u(
ytyvar~mls(ytyvar,1:3,1)
+mixed[[1]]
+mixed[[2]]
+mixed[[3]]
+mixed[[4]]
+mixed[[5]]
+mixed[[6]]
+mixed[[7]]
+mixed[[8]]
+mixed[[9]]
+mixed[[10]]
)
mixed[[10]]
midas_u(
ytyvar~mls(ytyvar,1:3,1)
+mixed[[1]]
+mixed[[2]]
+mixed[[3]]
+mixed[[4]]
+mixed[[5]]
+mixed[[6]]
+mixed[[7]]
+mixed[[8]]
+mixed[[9]]
+mixed[[10]]
)
summary(midas_u(
ytyvar~mls(ytyvar,1:3,1)
+mixed[[1]]
+mixed[[2]]
+mixed[[3]]
+mixed[[4]]
+mixed[[5]]
+mixed[[6]]
+mixed[[7]]
+mixed[[8]]
+mixed[[9]]
+mixed[[10]]
))
model1 <- midas_u(
ytyvar~mls(ytyvar,1:3,1)
+mixed[[1]]
+mixed[[2]]
+mixed[[3]]
+mixed[[4]]
+mixed[[5]]
+mixed[[6]]
+mixed[[7]]
+mixed[[8]]
+mixed[[9]]
+mixed[[10]]
)
length(ytyvar[1:20])
length(ytyvar[21:35])
y_train = ytyvar[1:20]
y_test = ytyvar[21:35]
X_brut_train = X_brut[1:80,]
X_brut_test = X_brut[81:105,]
hf_train = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut_train),i)
}
mixed_train = c()
for (i in 1:length(hf_train)){
mixed_train[[i]] <- fmls(hf_train[[i]],4,3)
}
hf_train = c()
for (i in 2:ncol(X_brut)){
hf_train[i-1] <- select(data.frame(X_brut_train),i)
}
mixed_train = c()
for (i in 1:length(hf_train)){
mixed_train[[i]] <- fmls(hf_train[[i]],4,3)
}
hf_train = c()
for (i in 2:ncol(X_brut_train)){
hf_train[i-1] <- select(data.frame(X_brut_train),i)
}
hf_train
hf = c()
for (i in 2:ncol(X_brut)){
hf[i-1] <- select(data.frame(X_brut),i)
}
mixed = c()
for (i in 1:length(hf)){
mixed[[i]] <- fmls(hf[[i]],4,3)
}
hf
hf_train = c()
mixed_train = c()
for (i in 2:ncol(X_brut_train)){
hf_train[i-1] <- select(data.frame(X_brut_train),i)
mixed_train[[i]] <- fmls(hf_train[[i]],4,3)
}
hf_train = c()
mixed_train = c()
for (i in 2:ncol(X_brut_train)){
hf_train[i-1] <- select(data.frame(X_brut_train),i)
mixed_train[[i-1]] <- fmls(hf_train[[i-1]],4,3)
}
y_train = ytyvar[1:25]
y_test = ytyvar[26:35]
X_brut_train = X_brut[1:75,]
X_brut_test = X_brut[76:105,]
hf_train = c()
mixed_train = c()
for (i in 2:ncol(X_brut_train)){
hf_train[i-1] <- select(data.frame(X_brut_train),i)
mixed_train[[i-1]] <- fmls(hf_train[[i-1]],4,3)
}
modeltrain = midas_u(
y_train~mls(y_train,1:3,1)
+mixed_train[[1]]
+mixed_train[[2]]
+mixed_train[[3]]
+mixed_train[[4]]
+mixed_train[[5]]
+mixed_train[[6]]
+mixed_train[[7]]
+mixed_train[[8]]
+mixed_train[[9]]
+mixed_train[[10]]
)
modeltrain
summary(modeltrain)
?forecast
mixed_train[1]
hf_test = c()
mixed_test = c()
for (i in 2:ncol(X_brut_test)){
hf_test[i-1] <- select(data.frame(X_brut_test),i)
mixed_test[[i-1]] <- fmls(hf_test[[i-1]],4,3)
}
hf_test = c()
mixed_test = c()
for (i in 2:ncol(X_brut_test)){
hf_test[i-1] <- select(data.frame(X_brut_test),i)
mixed_test[i-1] <- fmls(hf_test[[i-1]],4,3)
}
mixed_test[1]
mixed_test
hf_test = c()
mixed_test = c()
for (i in 2:ncol(X_brut_test)){
hf_test[i-1] <- select(data.frame(X_brut_test),i)
mixed_test[[i-1]] <- fmls(hf_test[[i-1]],4,3)
}
forecast(modeltrain, newdata = list(y_test,hf_test), method="static")
forecast(modeltrain, newdata = list(mls(y_test,1:3,1),mixed_test), method="static")
newdata = c(mls(y_test,1:3,1),mixed_test)
forecast(modeltrain, newdata = newdata, method="static")
newdata
length(newdata)
newdata = c()
for (i in 2:(length(mixed_test)+1)){
newdata[[i]] = mixed_test[i-1]
}
newdata[[1]] = mls(y_test,1:3,1)
newdata
forecast(modeltrain, newdata = newdata, method="static")
length(newdata)
forecast(modeltrain, newdata, method="static")
newdata = c()
for (i in 1:(length(mixed_test))){
newdata[[i]] = mixed_test[i]
}
forecast(modeltrain, newdata, method="static")
forecast(modeltrain, hf_test, method="static")
hf.test
hf_test
forecast(modeltrain, hf_test, method="static")
forecast(modeltrain, method="static")
forecast(modeltrain, X_brut_test, method="static")
mixed_train[[1]] = x1
mixed_train[[2]] = x2
mixed_train[[3]] = x3
mixed_train[[4]] = x4
mixed_train[[5]] = x5
mixed_train[[6]] = x6
mixed_train[[7]] = x7
mixed_train[[8]] = x8
mixed_train[[9]] = x9
mixed_train[[10]] = x10
x1 = mixed_train[[1]]
x2 = mixed_train[[2]]
x3 = mixed_train[[3]]
x4 = mixed_train[[4]]
x5 = mixed_train[[5]]
x6 = mixed_train[[6]]
x7 = mixed_train[[7]]
x8 = mixed_train[[8]]
x9 = mixed_train[[9]]
x10 = mixed_train[[10]]
modeltrain2 = lm(
y_train~mls(y_train,1:3,1)
+mixed_train[[1]]
+mixed_train[[2]]
+mixed_train[[3]]
+mixed_train[[4]]
+mixed_train[[5]]
+mixed_train[[6]]
+mixed_train[[7]]
+mixed_train[[8]]
+mixed_train[[9]]
+mixed_train[[10]]
)
summary(modeltrain2)
forecast(modeltrain2, mixed_test, method="static")
newdata = c()
for (i in 2:(length(mixed_test)+1)){
newdata[[i]] = mixed_test[i-1]
}
newdata[[1]] = mls(y_test,1:3,1)
forecast(modeltrain2, newdata=newdata, method="static")
?forecast
modeltrain2
modeltrain2$coefficients
modeltrain2$residuals
